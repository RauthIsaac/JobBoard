<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Create Account</title>
</head>
<body>
  <div class="container">
    <div class="form-container">
      <div class="my-4 text-center">
        <span class="fs-2 fw-medium">Create your account</span>
      </div>

      <!-- Traditional Sign-up Form -->
      <form class="w-100" [formGroup]="signupForm" (ngSubmit)="onSubmit()">
        
        <!-- User Type Selection -->
        <div class="form-group">
          <label class="fs-5">I want to sign up as:</label>
          <div class="radio-group">
            <label class="radio-option">
              <input type="radio" formControlName="user_type" value="Seeker" />
              Job Seeker
            </label>
            <label class="radio-option">
              <input type="radio" formControlName="user_type" value="Employer" />
              Employer
            </label>
          </div>
        </div>

        <!-- Employer Fields -->
        <div *ngIf="isEmployer" class="employer-section" [formGroup]="signupForm">
          <div class="section-header">
            <h5>Company Information</h5>
            <small>Please provide your company details</small>
          </div>

          <div class="form-group">
            <label class="fs-5">Company Name <span class="text-danger">*</span></label>
            <input formControlName="companyName" class="form-control" [class.is-invalid]="companyNameError" type="text" placeholder="Enter your company name">
            <div *ngIf="companyNameError" class="valid-form">{{ companyNameError }}</div>
          </div>

          <div class="form-group">
            <label class="fs-5">Company Location <span class="text-danger">*</span></label>
            <input formControlName="companyLocation" class="form-control" [class.is-invalid]="companyLocationError" type="text" placeholder="Enter your company location">
            <div *ngIf="companyLocationError" class="valid-form">{{ companyLocationError }}</div>
          </div>
        </div>

        <!-- Username -->
        <div class="full-width my-3">
          <label class="fs-5">Username</label>
          <input type="text" formControlName="userName" class="form-control" [class.is-invalid]="userNameError" placeholder="ex: userName" />
          <div *ngIf="userNameError" class="valid-form">{{ userNameError }}</div>
        </div>

        <!-- Email -->
        <div class="full-width my-3">
          <label class="fs-5">Email</label>
          <input type="email" formControlName="email" class="form-control" [class.is-invalid]="emailError" placeholder="ex: user@gmail.com" />
          <div *ngIf="emailError" class="valid-form">{{ emailError }}</div>
        </div>

        <div class="full-width my-3">
    <label class="fs-5">Password</label>
    <div class="password-input-container">
      <input [type]="hidePassword ? 'password' : 'text'" formControlName="password" class="form-control password-input" [class.is-invalid]="passwordError" placeholder="********" />
      <button type="button" class="password-toggle-btn" (click)="hidePassword = !hidePassword">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path *ngIf="hidePassword" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2" fill="none"/>
          <circle *ngIf="hidePassword" cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
          <path *ngIf="!hidePassword" d="m1 12 4-4v8l-4-4z" stroke="currentColor" stroke-width="2" fill="none"/>
          <path *ngIf="!hidePassword" d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" stroke="currentColor" stroke-width="2" fill="none"/>
          <line *ngIf="!hidePassword" x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>
    <div *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.invalid" class="valid-form">
      <div *ngIf="signupForm.get('password')?.errors?.['required']">Password is required</div>
      <div *ngIf="signupForm.get('password')?.errors?.['minlength']">Password must be at least 6 characters</div>
    </div>
    <div *ngIf="passwordError" class="valid-form">{{ passwordError }}</div>
  </div>

  <!-- Confirm Password -->
  <div class="full-width my-3">
    <label class="fs-5">Confirm Password</label>
    <div class="password-input-container">
      <input [type]="hideConfirmPassword ? 'password' : 'text'" formControlName="confirmPassword" class="form-control password-input" [class.is-invalid]="confirmPasswordError" placeholder="********" />
      <button type="button" class="password-toggle-btn" (click)="hideConfirmPassword = !hideConfirmPassword">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path *ngIf="hideConfirmPassword" d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2" fill="none"/>
          <circle *ngIf="hideConfirmPassword" cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
          <path *ngIf="!hideConfirmPassword" d="m1 12 4-4v8l-4-4z" stroke="currentColor" stroke-width="2" fill="none"/>
          <path *ngIf="!hideConfirmPassword" d="M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" stroke="currentColor" stroke-width="2" fill="none"/>
          <line *ngIf="!hideConfirmPassword" x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2"/>
        </svg>
      </button>
    </div>
    <div *ngIf="signupForm.get('confirmPassword')?.touched && signupForm.get('confirmPassword')?.invalid" class="valid-form">
      <div *ngIf="signupForm.get('confirmPassword')?.errors?.['required']">Confirm password is required</div>
      <div *ngIf="signupForm.get('confirmPassword')?.errors?.['minlength']">Confirm password must be at least 6 characters</div>
    </div>
    <div *ngIf="confirmPasswordError" class="valid-form">{{ confirmPasswordError }}</div>
  </div>


        <!-- Submit -->
        <button class="reset-btn fs-4 my-3 w-100" type="submit" [disabled]="signupForm.invalid">Register</button>

        <span class="d-flex justify-content-center fw-lighter">OR</span>

        <!-- Google Sign-up Section -->
        <div class="my-3" [formGroup]="signupForm">
          <!-- Loading Overlay for Google -->
          <div *ngIf="isGoogleLoading" class="google-loading-overlay">
            <div class="spinner"></div>
            <p>Creating your account...</p>
          </div>
          
          <!-- Google Success Message -->
          <div *ngIf="googleSuccessMessage" class="google-alert google-alert-success">
            {{ googleSuccessMessage }}
            <button type="button" class="alert-close" (click)="googleSuccessMessage = ''">×</button>
          </div>
          
          <!-- Google Error Message -->
          <div *ngIf="googleErrorMessage" class="google-alert google-alert-danger">
            {{ googleErrorMessage }}
            <button type="button" class="alert-close" (click)="googleErrorMessage = ''">×</button>
          </div>
          
          <!-- Add the missing Google button container -->
          <div class="google-button-container">
            <div class="g_id_signin"></div>
          </div>
        </div>
        
        <p class="text-center fs-5 mt-2">
          Already have an account?
          <a routerLink="/login" class="text-primary" style="cursor: pointer; text-decoration: underline">Login</a>
        </p>
  
      </form>
    </div>
  </div>
</body>
</html>