<div class="navbar-custom d-flex align-items-center justify-content-between" [ngClass]="{'collapsed': !isSidebarOpen}">
    <div class="d-flex align-items-center">
        <button class="btn btn-link" (click)="toggleSidebar()">
            <div class="logo-icon me-2">
                <i class="bi bi-suitcase-lg"></i>
            </div>
        </button>

        <!-- Logo and Brand -->
        <div class="d-flex fs-3">
            <div class="navbar-brand fw-bold" routerLink="/empDashboard">Company Dashboard</div>
        </div>
    </div>

    <div class="d-flex justify-content-end">
        <div class="d-flex flex-column flex-md-row align-items-center w-100 w-md-auto">

            <div class="d-flex align-items-center gap-3 order-1 order-md-2">

                <div class="notification-container">
                    <!-- Notification Bell -->
                    <button class="notification-bell" (click)="toggleDropdown()">
                        <span class="bell-icon">üîî</span>
                        <div class="notification-badge" [class.show]="unreadCount() > 0">
                        {{ unreadCount() > 99 ? '99+' : unreadCount() }}
                        </div>
                        <div class="connection-indicator" 
                            [ngClass]="'status-' + connectionStatus().toLowerCase()">
                        </div>
                    </button>

                    <!-- Notification Dropdown -->
                    <div class="notification-dropdown" 
                        [class.show]="isDropdownOpen"
                        #dropdown>
                        
                        <div class="dropdown-header">
                            <h3 class="dropdown-title">Notifications</h3>
                            <div class="header-actions">
                                <button *ngIf="unreadCount() > 0" 
                                        class="btn btn-mark-all" 
                                        (click)="markAllAsRead()">
                                ‚úì All
                                </button>
                                <button *ngIf="notifications().length > 0" 
                                        class="btn btn-clear" 
                                        (click)="clearNotifications()">
                                üóëÔ∏è Clear
                                </button>
                            </div>
                        </div>

                        <div class="notifications-list">
                            <!-- Empty State -->
                            <div *ngIf="notifications().length === 0" class="empty-state">
                                <span class="empty-icon">üì≠</span>
                                <div class="empty-message">No notifications yet</div>
                                <div class="empty-subtitle">You'll be notified about job updates</div>
                            </div>
                            
                            <!-- Notifications List -->
                            <div *ngFor="let notification of notifications(); let i = index" 
                                class="notification-item"
                                [class.unread]="!notification.isRead"
                                [class.read]="notification.isRead">
                                
                                <div class="notification-content">
                                    <div class="notification-message">
                                        {{ notification.message }}
                                    </div>
                                    <div class="notification-meta">
                                        <span>{{ getTimeDifference(notification.createdAt + 'Z') }}</span>
                                        <span *ngIf="!notification.isRead" class="unread-dot"></span>
                                    </div>
                                </div>

                                <div class="notification-actions">
                                    <button *ngIf="notification.link" 
                                            class="action-btn btn-view" 
                                            (click)="viewNotification(notification.link)"
                                            title="View">
                                        üëÅÔ∏è
                                    </button>
                                    
                                    <button *ngIf="!notification.isRead" 
                                            class="action-btn btn-read" 
                                            (click)="markAsRead(i)"
                                            title="Mark as read">
                                        ‚úì
                                    </button>
                                    
                                    <button class="action-btn btn-delete" 
                                            (click)="deleteNotification(i)"
                                            title="Delete">
                                        ‚ùå
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Reconnect Section -->
                        <div *ngIf="connectionStatus() === 'Error' || connectionStatus() === 'Disconnected'" 
                            class="reconnect-section">
                            <button class="btn-reconnect" (click)="reconnect()">
                                üîÑ Reconnect
                            </button>
                        </div>
                    </div>
            
                </div>

                <!-- Profile Dropdown -->
                <div class="dropdown">
                    <button class="log-btn dropdown-toggle" type="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person fs-4"></i>
                    </button>

                    <ul class="dropdown-menu dropdown-menu-end">
                        <li class="nav-item">
                            <button class="nav-link" routerLink="/empProfile">
                                <i class="bi bi-person-circle ms-4 me-2"></i>My Profile
                            </button>
                        </li>

                        <li><hr class="dropdown-divider"></li>

                        <li class="nav-item">
                            <button class="nav-link" routerLink="/editEmp">
                                <i class="bi bi-pencil-square ms-3 me-2"></i>Edit My Profile
                            </button>
                        </li>

                        <li><hr class="dropdown-divider"></li>

                        <li>
                            <button class="dropdown-item text-danger" (click)="logout()">
                                <i class="bi bi-box-arrow-right ms-3 me-2"></i>Logout
                            </button>
                        </li>
                    </ul>
                </div>
            </div>


        </div>
    </div>    
      
</div>


