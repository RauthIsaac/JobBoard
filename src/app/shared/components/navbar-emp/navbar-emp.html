<div class="navbar-custom d-flex align-items-center justify-content-between" [ngClass]="{'collapsed': !isSidebarOpen}">
    <div class="d-flex align-items-center">
        <button class="btn btn-link" (click)="toggleSidebar()">
            <div class="logo-icon me-2">
                <i class="bi bi-suitcase-lg"></i>
            </div>
        </button>

        <!-- Logo and Brand -->
        <div class="d-flex fs-3">
            <div class="navbar-brand fw-bold" routerLink="/empDashboard">Company Dashboard</div>
        </div>
    </div>

    <div class="d-flex justify-content-end">
        <div class="d-flex flex-column flex-md-row align-items-center w-100 w-md-auto">

            <div class="d-flex align-items-center gap-3 order-1 order-md-2">

<div class="notification-container">
    <button class="notification-bell" (click)="toggleDropdown()" title="Notifications">
      <i class="bi bi-bell bell-icon"></i>
      <span class="notification-badge" [class.show]="unreadCount() > 0">
        {{ unreadCount() > 99 ? '99+' : unreadCount() }}
      </span>
    </button>

    <div class="notification-dropdown" [class.show]="isDropdownOpen">
      <div class="dropdown-header">
        <h3 class="dropdown-title">Notifications</h3>
        <div class="header-actions">
          <button class="btn btn-mark-all" (click)="markAllAsRead()" title="Mark all as read">
            <i class="bi bi-check"></i> Mark All
          </button>
          <button class="btn btn-clear" (click)="clearNotifications()" title="Clear all">
            <i class="bi bi-trash"></i> Clear
          </button>
        </div>
      </div>

      <div class="notifications-list" *ngIf="notifications().length; else emptyState">
        <div class="notification-item" *ngFor="let notification of notifications(); let i = index"
             [class.unread]="!notification.isRead">
          <div class="notification-content" *ngIf="notification.link" (click)="viewNotification(notification.link)">
            <p class="notification-message">{{ notification.message }}</p>
            <div class="notification-meta">
              <span>{{ getTimeDifference(notification.createdAt + 'Z') }}</span>
            </div>
          </div>
          <div class="notification-actions">
            <button class="action-btn btn-read" *ngIf="!notification.isRead"
                    (click)="markAsRead(i)"
                    title="Mark as read">
              <i class="bi bi-check"></i>
            </button>
            <button class="action-btn btn-delete" (click)="deleteNotification(i)"
                    title="Delete">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </div>
      </div>

      <ng-template #emptyState>
        <div class="empty-state">
          <i class="bi bi-bell-slash empty-icon"></i>
          <p class="empty-message">No notifications yet</p>
          <p class="empty-subtitle">You'll be notified about job updates</p>
        </div>
      </ng-template>

      <div class="reconnect-section" *ngIf="connectionStatus() !== 'Connected'">
        <button class="btn-reconnect" (click)="reconnect()">
          <i class="bi bi-arrow-clockwise"></i> Reconnect
        </button>
      </div>
    </div>
  </div>

                <!-- Profile Dropdown -->
                <div class="dropdown">
                    <button class="log-btn dropdown-toggle" type="button"
                            data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-person fs-4"></i>
                    </button>

                    <ul class="dropdown-menu dropdown-menu-end">
                        <li class="nav-item">
                            <button class="nav-link" routerLink="/empProfile">
                                <i class="bi bi-person-circle ms-4 me-2"></i>My Profile
                            </button>
                        </li>

                        <li><hr class="dropdown-divider"></li>

                        <li class="nav-item">
                            <button class="nav-link" routerLink="/editEmp">
                                <i class="bi bi-pencil-square ms-3 me-2"></i>Edit My Profile
                            </button>
                        </li>

                        <li><hr class="dropdown-divider"></li>

                        <li>
                            <button class="dropdown-item text-danger" (click)="logout()">
                                <i class="bi bi-box-arrow-right ms-3 me-2"></i>Logout
                            </button>
                        </li>
                    </ul>
                </div>
            </div>


        </div>
    </div>    
      
</div>


