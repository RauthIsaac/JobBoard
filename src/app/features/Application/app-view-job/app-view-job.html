<div>
    <div class="nav">
        <a routerLink="/empPostedJobs"><i class="bi bi-arrow-left me-3 fs-3 fade-line"></i> </a>
        <h5 class="mt-2 fade-line">Back to Your Posted Jobs</h5>
    </div>
    <div class="header-section">
        <div class="title-container">
            <div class="d-flex">
                <div class="icon fade-line">
                    <i class="bi bi-buildings"></i>
                </div>
                <div>
                    <h1 class="fade-line">Application Inbox</h1>
                    <p class="fade-line">Manage and review all your job applications in one place</p>
                </div>
            </div>
        </div>
    </div>

    <div class="container">

        <div class="applications-section my-3">
            <div *ngIf="isLoading()" class="loading"><app-loading-page></app-loading-page></div>

            <div *ngIf="!isLoading()" class="results-container">
                <div class="results-info fade-line">
                    <h5>{{applicationsList().length}} Application{{applicationsList().length !== 1 ? 's' : ''}} found</h5>
                </div>


                <div *ngIf="applicationsList().length > 0" class="application-list fade-line">
                    <div *ngFor="let app of applicationsList(); trackBy: trackByApplicationId" 
                        class="application-card fade-line" 
                        [ngClass]="getCardClass(app.status)">
                        <div class="card-left">
                            <div class="initials fade-line" [ngClass]="getInitialsClass(app.applicantName)">
                                {{getInitials(app.applicantName)}}
                            </div>
                            <div class="applicant-info">
                                <h3 class="fade-line">{{app.applicantName}}</h3>
                                <div class="d-flex fade-line">
                                    <span class="text-muted me-1">Applied for</span> 
                                    <h6 style="padding-top: 2px;">{{app.jobTitle}}</h6>
                                </div>
                                <div class="d-flex mt-2 fade-line">
                                    <i class="bi bi-calendar-check me-2 mt-1"></i><p class="me-4">{{app.appliedDate}}</p>
                                    <p> {{app.experience}}</p>
                                </div>

                                <div class="d-flex mt-2">
                                    
                                    <!-- Resume download link - always available -->
                                    <a class="open-cv-btn fade-line" 
                                        [href]="app.resumeUrl" 
                                        target="_blank" 
                                        *ngIf="app.resumeUrl">
                                       <i class="bi bi-box-arrow-up-right me-2"></i> Open CV
                                    </a>

                                    <button class="view-profile-btn fade-line" [routerLink]="['/appView',app.id]">
                                        <i class="bi bi-eye me-2"></i> View Application Details
                                    </button>

                                </div>
                            </div>
                        </div>
                        <div class="card-right">

                            <span class="status fade-line" [ngClass]="getStatusClass(app.statusDisplay)">
                                {{app.statusDisplay}}
                            </span>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>