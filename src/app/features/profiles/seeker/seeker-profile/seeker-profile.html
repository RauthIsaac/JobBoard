<mat-card class="seeker-profile-card">
  <mat-card-header>
    <div mat-card-avatar class="profile-avatar">
      <img mat-card-avatar [src]="profile.profilePictureUrl || 'profile-icon-design-free-vector.jpg'" alt="Profile Picture">
      <label for="profilePicture" class="upload-overlay">
        <mat-icon>edit</mat-icon>
      </label>
      <input id="profilePicture" type="file" class="hidden-file-input" (change)="onFileSelected($event)">
    </div>
    <mat-card-title>Seeker Profile</mat-card-title>
    <mat-card-subtitle>Update your personal information and experience</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content class="space-y-6">
    <div class="info-section">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <mat-form-field appearance="outline">
          <mat-label>First Name</mat-label>
          <input matInput placeholder="First Name" [(ngModel)]="profile.firstName" />
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Last Name</mat-label>
          <input matInput placeholder="Last Name" [(ngModel)]="profile.lastName" />
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Address</mat-label>
        <input matInput placeholder="Address" [(ngModel)]="profile.address" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>CV URL</mat-label>
        <input matInput placeholder="CV URL" [(ngModel)]="profile.CV_URL" />
      </mat-form-field>

      <mat-form-field appearance="outline" class="w-full">
        <mat-label>Bio</mat-label>
        <textarea matInput placeholder="Tell us a little about yourself..." [(ngModel)]="profile.bio" matTextareaAutosize matAutosizeMinRows="3" matAutosizeMaxRows="6"></textarea>
      </mat-form-field>
    </div>

    <mat-divider></mat-divider>
    <div class="dynamic-section">
      <div class="flex justify-between items-center mb-4">
        <h3 class="mat-subheading-2">Work Experience</h3>
        <button mat-icon-button color="primary" (click)="addExperience()">
          <mat-icon>add_circle_outline</mat-icon>
        </button>
      </div>
      <div *ngFor="let exp of profile.experience; let i = index" class="item-card">
        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Job Title</mat-label>
          <input matInput placeholder="Job Title" [(ngModel)]="exp.jobTitle" />
        </mat-form-field>
        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Company</mat-label>
          <input matInput placeholder="Company" [(ngModel)]="exp.company" />
        </mat-form-field>
        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Job Description</mat-label>
          <textarea matInput placeholder="Job Description..." [(ngModel)]="exp.description" matTextareaAutosize matAutosizeMinRows="2"></textarea>
        </mat-form-field>
        <div class="grid grid-cols-2 gap-4">
          <mat-form-field appearance="fill">
            <mat-label>Start Date</mat-label>
            <input matInput type="month" [(ngModel)]="exp.startDate" />
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>End Date</mat-label>
            <input matInput type="month" [(ngModel)]="exp.endDate" />
          </mat-form-field>
        </div>
        <button mat-mini-fab color="warn" (click)="removeExperience(i)" class="remove-btn">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>

    <mat-divider></mat-divider>
    <div class="dynamic-section">
      <div class="flex justify-between items-center mb-4">
        <h3 class="mat-subheading-2">Education</h3>
        <button mat-icon-button color="primary" (click)="addEducation()">
          <mat-icon>add_circle_outline</mat-icon>
        </button>
      </div>
      <div *ngFor="let edu of profile.education; let i = index" class="item-card">
        <mat-form-field appearance="fill" class="w-full">
          <mat-label>Degree</mat-label>
          <input matInput placeholder="Degree" [(ngModel)]="edu.degree" />
        </mat-form-field>
        <mat-form-field appearance="fill" class="w-full">
          <mat-label>University</mat-label>
          <input matInput placeholder="University" [(ngModel)]="edu.university" />
        </mat-form-field>
        <div class="grid grid-cols-2 gap-4">
          <mat-form-field appearance="fill">
            <mat-label>Start Date</mat-label>
            <input matInput type="month" [(ngModel)]="edu.startDate" />
          </mat-form-field>
          <mat-form-field appearance="fill">
            <mat-label>Graduation Date</mat-label>
            <input matInput type="month" [(ngModel)]="edu.endDate" />
          </mat-form-field>
        </div>
        <button mat-mini-fab color="warn" (click)="removeEducation(i)" class="remove-btn">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>

    <mat-divider></mat-divider>
    <div class="dynamic-section">
      <h3 class="mat-subheading-2 mb-4">Skills</h3>
      <mat-chip-grid aria-label="Skills selection" #chipList>
        <mat-chip-row *ngFor="let skill of profile.skills; let i = index" (removed)="removeSkill(i)">
          {{ skill }}
          <button matChipRemove [attr.aria-label]="'remove ' + skill">
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip-row>
      </mat-chip-grid>
      <mat-form-field appearance="fill" class="w-full mt-4">
        <mat-label>Add a new skill</mat-label>
        <input
          matInput
          placeholder="Type a skill and press Enter"
          #skillInput
          [matChipInputFor]="chipList"
          (matChipInputTokenEnd)="addSkill($event)"
        />
      </mat-form-field>
    </div>
  </mat-card-content>

  <mat-card-actions class="flex justify-center mt-6">
    <button mat-raised-button color="primary" class="w-full md:w-auto" (click)="saveProfile()">
      <mat-icon>save</mat-icon> Save Profile
    </button>
  </mat-card-actions>
</mat-card>
